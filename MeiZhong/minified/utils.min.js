class elementary{static create(tag,attributes={}){var ele=document.createElement(tag);return Array.isArray(attributes)?ele.attr(...attributes):Object.keys(attributes).length&&ele.attr(attributes),ele}}class dedupmei{static async send(msg){let whilst=new Promise(resolve=>{try{chrome.runtime.sendMessage(msg,response=>{if(chrome.runtime.lastError)console.warn(chrome.runtime.lastError);else if("strokes"===msg.type){let xmparse=new DOMParser;msg.response=xmparse.parseFromString(response,"text/xml").documentElement}else msg.response=response;resolve()})}catch(err){resolve(),console.log([msg,err])}});return await whilst,msg.response}}function axorray(L,R){let xor=L.slice(0),acum={};xor.push(...R),xor.forEach(v=>{acum[v]?acum[v]++:acum[v]=1}),xor=[];for(let k in acum)1===acum[k]&&xor.push(k);return xor}async function elevate(io){if(!(io=await io))return io;for(var va=[],i=0,k=io.length;i<k;i++)va=va.concat(io[i]);return va}function ints(o){let ret={};for(let k in o)("number"==typeof o[k]||parseInt(o[k]))&&(ret[k]=o[k]);return ret}Array.prototype.any||Object.defineProperty(Array.prototype,"any",{enumerable:!1,value:function(fn){let vout;for(let v of this)if(vout=fn(v))return vout;return!1}}),CSSStyleDeclaration.prototype.css||Object.defineProperty(CSSStyleDeclaration.prototype,"css",{enumerable:!1,value:function(props){if("string"==typeof props)return this.getPropertyValue(props);for(let prop in props)props[prop]&&props[prop].length?this.setProperty(prop,props[prop]):this.removeProperty(prop)}}),Node.prototype.offsets||Object.defineProperty(Node.prototype,"offsets",{enumerable:!1,value:function(rootNode=document.body,inode={}){let nodes=[],xy={top:0,left:0};if(inode.x&&inode.y)nodes=document.elementsFromPoint(inode.x,inode.y);else for(inode=this;nodes.push(inode)&&inode!==rootNode&&(inode=inode.offsetParent););for(let node of nodes){if(node===rootNode)break;xy.top+=node.offsetTop,xy.left+=node.offsetLeft}return xy}}),Node.prototype.attr||Object.defineProperty(Node.prototype,"attr",{enumerable:!1,value:function(...attributes){let undef,keyed=null,attrs=attributes.reduce((packed,val,idx)=>(keyed?(packed[keyed]=val,keyed=null):"string"==typeof val?keyed=val:"object"==typeof val&&Object.assign(packed,val),packed),{});for(let name in attrs)if("children"===name){let children=document.createDocumentFragment();try{let ary=Array.isArray(attrs[name])?attrs[name]:[attrs[name]];for(let e of ary)children.appendChild(e)}finally{this.appendChild(children)}}else"textChild"===name?this.textChild=attrs[name]:attrs[name]instanceof RegExp||"function"==typeof attrs[name]?this.fn(name,attrs[name]):attrs[name]&&0!==attrs[name].toString().length?this.setAttribute(name,attrs[name]):this.removeAttribute(name);return this}}),Node.prototype.fn||Object.defineProperty(Node.prototype,"fn",{enumerable:!1,value:function(name,fn){if(fn){let nfn={};nfn[name]=fn,this._fn=Object.assign(this._fn||{},nfn)}else{if(void 0===fn)return(this._fn||{})[name]||this.getAttribute(name);name?delete(this._fn=this._fn||{})[name]:delete this._fn}return this}}),Element.prototype.oneve||Object.defineProperty(Element.prototype,"oneve",{enumerable:!1,value:function(eventName,fn){return this.addEventListener(eventName,fn),fn.name&&this.fn(fn.name,fn),this}}),Element.prototype.offeve||Object.defineProperty(Element.prototype,"offeve",{enumerable:!1,value:function(eventName,fn){let recall=this.fn(fn.name||fn);return recall&&(this.removeEventListener(eventName,recall),this.fn(fn.name||fn,null)),this}}),Element.prototype.textChild||Object.defineProperty(Element.prototype,"textChild",{enumerable:!1,set:function(text){"string"==typeof text&&(this.innerHTML="",this.append(document.createTextNode(text)))}}),HTMLElement.prototype.replace||Object.defineProperty(Node.prototype,"replace",{enumerable:!1,value:function(...elements){elements.forEach(ele=>{this.insertAdjacentElement("beforebegin",ele)}),this.remove()}}),NodeList.prototype.lastVisible||Object.defineProperty(NodeList.prototype,"lastVisible",{enumerable:!1,get(){for(let n=this.length-1;n>=0;n--){let style;if("none"!==window.getComputedStyle(this.item(n)).display)return this.item(n)}}}),String.prototype.firstchar||Object.defineProperty(String.prototype,"firstchar",{enumerable:!1,get:function(){return this.length?this.match(/^./u)[0]:""}}),String.prototype.utfAt||Object.defineProperty(String.prototype,"utfAt",{enumerable:!1,value:function(n){if(this.length>n)try{return this.match(new RegExp("^.{"+n+"}(.)","u"))[1]}catch{}return""}});