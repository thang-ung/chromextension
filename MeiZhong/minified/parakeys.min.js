const __editables=['[contenteditable="true"]',"input","textarea","#text"],parakeys={sp:" ","¶":"\n","’ ƒ":/‘$1’/,"” ƒ":/“$1”/,ghoul:wo=>{let title="Toggle\nunvisited";return elementary.create("img",{alt:"●",class:"simpel","data-title-left":title,src:chrome.runtime.getURL("/images/ghoul.png"),style:"max-width:1.28em;"}).oneve("click",evt=>{if(wo&&wo.toggle)wo.toggle("hidden");else{let root=evt.target.closest("#parakeys").parentNode,booltrad=root.matches(".traditional"),elip=root.querySelector(".ellipser");booltrad||"simpel"!==["simpel","hidden"].filter(c=>elip.classList.contains(c)).join("")?elip.classList.toggle("hidden")||booltrad||(elip.classList.add("simpel"),evt.target.parentNode.parentNode.classList.add("simpel")):(elip.classList.remove("simpel"),evt.target.parentNode.parentNode.classList.remove("simpel"))}})},draghand:elementary.create("img",{alt:"●",class:"dumb","data-title":"drag\nhandle"}).attr("src",chrome.runtime.getURL("/images/mikih.png")),focus:content=>{let title="Output target\nLockdown",fn=event=>{if(event.target.classList.toggle("active")){let sr=window.getSelection(),target=sr.focusNode,focus=target;__editables.indexOf(target.nodeName)>=1&&(target=target.parentNode),target.classList.toggle("meiolocker");let cmpu=target.getBoundingClientRect(),booltest;return parseInt(cmpu.left)<=0&&target.classList.add("aftr"),{type:"focus",focus:focus.matches&&!focus.matches(__editables.join(","))?focus.querySelector(__editables.join(",")):focus,tagged:target,range:sr.getRangeAt(0),wo:event.target}}{let ele=document.querySelector(".meiolocker");return ele&&ele.classList.remove("meiolocker"),{type:"focus"}}};return elementary.create("div",{id:"meiolocker",class:"jump","data-title-left":title,mousedown:fn,textChild:"●"})},"灭 ƒ":()=>{let title="List top\ncommon\nglyphs",fn=(evt,wo,dest)=>{if(wo&&wo instanceof zhoChat){let lnwidth=20;if(dest instanceof Selection&&dest.baseNode){let _dest="#text"===dest.baseNode.nodeName?dest.baseNode.parentNode:dest.baseNode,fosz=parseInt(window.getComputedStyle(_dest).getPropertyValue("font-size")),w=_dest.parentNode.offsetWidth;return lnwidth=parseInt(1.4*w/fosz)||lnwidth,console.log(lnwidth),wo.hotlines(300,lnwidth)}return wo}};return elementary.create("div",{class:"jump",textChild:"灭 ƒ",mousedown:fn,"data-title-left":title})},"∞ƒ":context=>{let title="Recalibrate";return elementary.create("img",{alt:"●","data-title-left":title,src:chrome.runtime.getURL("/images/compass-je.png"),style:"max-width:1.28em;"}).oneve("click",evt=>{if(context&&context instanceof zhoChat)return context.rx(!0)})},"拇ƒ":()=>{let title="Thumbs\ndata",fn=async(evt,wo)=>{if(wo&&wo instanceof zhoChat){let $postee=window.getSelection(),srtxt,inputln=$postee.toString().replace(/[\r\n ]+$/g,"");if(inputln.length>0){try{wo.setQu(JSON.parse(inputln)),$postee.deleteFromDocument()}catch(e){wo.rank(inputln),console.log(e)}return""}return JSON.stringify(await wo.qu)}};return elementary.create("div",{class:"jump",textChild:"拇ƒ","data-title-left":title,mousedown:fn})}};